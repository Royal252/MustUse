import http.server
import socketserver
from urllib.parse import urlparse, parse_qs

class MyHandler(http.server.BaseHTTPRequestHandler):
    def do_GET(self):

        # Extract the flag from request
        print("\nFLAG: "+ "BITSCTF{" + parse_qs(urlparse(self.path).query).get('flag', [None])[0].split("BITSCTF")[1]+"}")


def start_server():
    PORT = 8080
    with socketserver.TCPServer(("", PORT), MyHandler) as httpd:
        httpd.serve_forever()

# Esegui il server
if __name__ == "__main__":
    start_server()
